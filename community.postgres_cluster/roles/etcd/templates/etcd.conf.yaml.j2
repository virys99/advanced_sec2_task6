name: '{{ inventory_hostname }}'
initial-cluster-token: PostgreSQL_HA_Cluster_1
initial-cluster-state: new
initial-cluster: {% for host in groups['postgres_cluster'] %}{{ hostvars[host]['ansible_facts']['hostname'] }}=http://{{ hostvars[host]['ansible_facts'][cluster_communication_interface]['ipv4']['address'] }}:2380{% if not loop.last %},{% endif %}{% endfor %}

data-dir: /var/lib/etcd
initial-advertise-peer-urls: http://{{ hostvars[inventory_hostname]['ansible_facts'][cluster_communication_interface]['ipv4']['address'] }}:2380
listen-peer-urls: http://{{ hostvars[inventory_hostname]['ansible_facts'][cluster_communication_interface]['ipv4']['address'] }}:2380
advertise-client-urls: http://{{ hostvars[inventory_hostname]['ansible_facts'][cluster_communication_interface]['ipv4']['address'] }}:2379
listen-client-urls: http://{{ hostvars[inventory_hostname]['ansible_facts'][cluster_communication_interface]['ipv4']['address'] }}:2379